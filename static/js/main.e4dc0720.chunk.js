(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{144:function(e,t,n){e.exports=n(218)},218:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(15),i=n.n(o),c=n(25),s=n(58),u=n(85),l=n(69),m=n(45),p=n(40),g=n(59),f=n(9),E=n(265),b=n(264),d=n(95),h=n(263),O=n(260),v=n(131),w=n.n(v),S=n(269),j=n(66),C=n(268),k=n(259),y=n(261),x=n(262),T=n(72),I=n(51),R=n(124),_=n.n(R),A=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(d.a,{variant:"display1"},"Log in!"),a.a.createElement(d.a,{paragraph:!0},"Please log in with GitHub to start organizing your repositories."))}}]),t}(r.Component),L=n(220),N=n(270),P=n(22),D=n(8),F=function(e){return a.a.createElement(D.b,Object.assign({formatterComponent:function(e){return e.value.toLocaleDateString()}},e))},z=function(e){return a.a.createElement(D.b,Object.assign({formatterComponent:function(e){var t=e.value,n=t.href,r=t.title;return a.a.createElement("a",{href:n},r)}},e))},G=function(e){return a.a.createElement(D.b,Object.assign({formatterComponent:function(e){var t=e.value;return t?a.a.createElement(a.a.Fragment,null,t.map(function(e){return a.a.createElement(N.a,{style:{margin:"3px"},key:e,label:e})})):null}},e))},V=function(e){return a.a.createElement(D.b,Object.assign({formatterComponent:function(e){var t=e.value;return a.a.createElement(N.a,{label:t?"True":"False"})}},e))},q=function(e){return a.a.createElement(D.b,Object.assign({formatterComponent:function(e){return e.value.length}},e))},U=[{columnName:"topics",wordWrapEnabled:!0},{columnName:"description",wordWrapEnabled:!0}];var B=Object(j.b)(function(e){return{gridState:e.gridState}},function(e){return{setGridState:function(t){return e({type:"SET_GRID_STATE",gridState:t})}}})(Object(f.a)(function(e){return{}})(function(e){var t=e.repositories,n=e.gridState,r=e.setGridState;return a.a.createElement(L.a,null,a.a.createElement(P.b,{columns:[{name:"name",title:"Name",getCellValue:function(e){return{href:e.url,title:e.name}}},{name:"description",title:"Description"},{name:"createdAt",title:"Created At",getCellValue:function(e){return new Date(e.createdAt)}},{name:"topics",title:"Topics"},{name:"stars",title:"Stars"},{name:"language",title:"Language"},{name:"owner",title:"Owner"},{name:"isPrivate",title:"Private"},{name:"isArchived",title:"Archived"},{name:"isFork",title:"Fork"},{name:"licenseNickname",title:"License"},{name:"vulnerabilityAlerts",title:"Vulnerability Alerts"},{name:"collaborators",title:"Collaborators",getCellValue:function(e){return e.collaborators&&e.collaborators.map(function(e){return e.login})}},{name:"issueCount",title:"Open Issue Count"}],rows:t},a.a.createElement(F,{for:["createdAt"]}),a.a.createElement(z,{for:["name"]}),a.a.createElement(G,{for:["topics","collaborators"]}),a.a.createElement(V,{for:["isPrivate","isArchived","isFork"]}),a.a.createElement(q,{for:["vulnerabilityAlerts"]}),a.a.createElement(D.d,{defaultFilters:[],filters:n.filteringState,onFiltersChange:function(e){r(Object(c.a)({},n,{filteringState:e}))}}),a.a.createElement(D.n,{defaultSorting:[],sorting:n.sortingState,onSortingChange:function(e){r(Object(c.a)({},n,{sortingState:e}))}}),a.a.createElement(D.k,{defaultCurrentPage:0,pageSize:40}),a.a.createElement(D.m,{value:n.searchState,onValueChange:function(e){r(Object(c.a)({},n,{searchState:e}))}}),a.a.createElement(D.g,null),a.a.createElement(D.i,null),a.a.createElement(D.h,null),a.a.createElement(P.e,{columnExtensions:U}),a.a.createElement(P.h,{showSortingControls:!0}),a.a.createElement(P.g,{showFilterSelector:!0}),a.a.createElement(P.f,{hiddenColumnNames:n.columnVisibilityState,onHiddenColumnNamesChange:function(e){r(Object(c.a)({},n,{columnVisibilityState:e}))}}),a.a.createElement(P.i,null),a.a.createElement(P.d,null),a.a.createElement(P.a,null),a.a.createElement(P.c,null)))}));function H(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement(B,{queryParams:e.queryParams,repositories:e.repositories}))}var W=n(68),M=n(44),K=function(e){var t=e.repositories.flatMap(function(e){return e.topics}).reduce(function(e,t){return Object(c.a)({},e,Object(M.a)({},t,e[t]?e[t]+1:1))},{}),n=Object.entries(t).map(function(e){var t=Object(W.a)(e,2);return{topicName:t[0],topicCount:t[1]}});return a.a.createElement(L.a,null,a.a.createElement(P.b,{columns:[{name:"topicName",title:"Topic Name"},{name:"topicCount",title:"Topic Count"}],rows:n},a.a.createElement(D.n,{defaultSorting:[{columnName:"topicCount",direction:"desc"}]}),a.a.createElement(D.i,null),a.a.createElement(P.e,null),a.a.createElement(P.h,{showSortingControls:!0})))},J=function(e){var t=e.repositories.map(function(e){return e.licenseNickname}).reduce(function(e,t){return Object(c.a)({},e,Object(M.a)({},t,e[t]?e[t]+1:1))},{}),n=Object.entries(t).map(function(e){var t=Object(W.a)(e,2);return{license:t[0],licenseCount:t[1]}});return a.a.createElement(L.a,null,a.a.createElement(P.b,{columns:[{name:"license",title:"License"},{name:"licenseCount",title:"License Count"}],rows:n},a.a.createElement(D.n,{defaultSorting:[{columnName:"licenseCount",direction:"desc"}]}),a.a.createElement(D.i,null),a.a.createElement(P.e,null),a.a.createElement(P.h,{showSortingControls:!0})))},X=function(e){var t=e.repositories.map(function(e){return e.language}).reduce(function(e,t){return Object(c.a)({},e,Object(M.a)({},t,e[t]?e[t]+1:1))},{}),n=Object.entries(t).map(function(e){var t=Object(W.a)(e,2);return{language:t[0],languageCount:t[1]}});return a.a.createElement(L.a,null,a.a.createElement(P.b,{columns:[{name:"language",title:"Language"},{name:"languageCount",title:"Count"}],rows:n},a.a.createElement(D.n,{defaultSorting:[{columnName:"languageCount",direction:"desc"}]}),a.a.createElement(D.i,null),a.a.createElement(P.e,null),a.a.createElement(P.h,{showSortingControls:!0})))},Q=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={drawerOpen:!1},n.ifLoggedOut=n.ifLoggedOut.bind(Object(p.a)(n)),n.ifLoggedIn=n.ifLoggedIn.bind(Object(p.a)(n)),n.ifRepositories=n.ifRepositories.bind(Object(p.a)(n)),n}return Object(g.a)(t,e),Object(u.a)(t,[{key:"toggleDrawer",value:function(e){this.setState(function(t){return Object(c.a)({},t,{drawerOpen:e||!t.drawerOpen})})}},{key:"ifRepositories",value:function(e){return this.props.repositories?e:null}},{key:"ifLoggedOut",value:function(e){return this.props.loggedIn?null:e}},{key:"ifLoggedIn",value:function(e){return this.props.loggedIn?e:null}},{key:"render",value:function(){var e=this,t=this.props.classes;return a.a.createElement(a.a.Fragment,null,a.a.createElement(S.a,null),a.a.createElement(T.a,null,a.a.createElement("div",{className:"App"},a.a.createElement(E.a,null,a.a.createElement(b.a,null,this.ifLoggedIn(a.a.createElement(O.a,{className:t.menuButton,color:"inherit","aria-label":"Menu",onClick:function(){return e.toggleDrawer()}},a.a.createElement(w.a,null))),a.a.createElement(d.a,{variant:"h6",color:"inherit",className:t.grow},"GitHub Repo Organizer"),this.ifLoggedOut(a.a.createElement(h.a,{onClick:this.props.startLogIn,color:"inherit"},"Login")),this.ifLoggedIn(a.a.createElement(h.a,{onClick:this.props.refresh,color:"inherit"},"Refresh")))),a.a.createElement(C.a,{open:this.state.drawerOpen,onClose:function(){return e.toggleDrawer(!1)}},a.a.createElement("div",{onClick:function(){return e.toggleDrawer(!1)},onKeyDown:function(){return e.toggleDrawer(!1)}},a.a.createElement(k.a,null,a.a.createElement(y.a,{button:!0},a.a.createElement(T.b,{to:"/github-repo-organizer/"},a.a.createElement(x.a,{primary:"Repositories"}))),a.a.createElement(y.a,{button:!0},a.a.createElement(T.b,{to:"/github-repo-organizer/topics"},a.a.createElement(x.a,{primary:"Topics"}))),a.a.createElement(y.a,{button:!0},a.a.createElement(T.b,{to:"/github-repo-organizer/licenses"},a.a.createElement(x.a,{primary:"Licenses"}))),a.a.createElement(y.a,{button:!0},a.a.createElement(T.b,{to:"/github-repo-organizer/languages"},a.a.createElement(x.a,{primary:"Languages"})))))),a.a.createElement("main",{className:t.content},a.a.createElement("div",{className:t.appBarSpacer}),this.ifLoggedOut(a.a.createElement(A,null)),this.ifLoggedIn(a.a.createElement(I.c,null,a.a.createElement(I.a,{exact:!0,path:"/github-repo-organizer/",component:function(t){var n=_.a.parse(t.location.search);return a.a.createElement(H,{queryParams:n,repositories:e.props.repositories||[]})}}),a.a.createElement(I.a,{exact:!0,path:"/github-repo-organizer/topics",component:function(){return a.a.createElement(K,{repositories:e.props.repositories})}}),a.a.createElement(I.a,{exact:!0,path:"/github-repo-organizer/licenses",component:function(){return a.a.createElement(J,{repositories:e.props.repositories})}}),a.a.createElement(I.a,{exact:!0,path:"/github-repo-organizer/languages",component:function(){return a.a.createElement(X,{repositories:e.props.repositories})}})))))))}}]),t}(r.Component),Y=Object(j.b)(function(e){return{loggedIn:e.loggedIn,repositories:e.repositories}},function(e){return{startLogIn:function(){return e({type:"START_LOG_IN"})},refresh:function(){return e({type:"REFRESH_REPOSITORIES"})},loadRepositories:function(){return e({type:"START_LOAD_REPOSITORIES"})},loadUser:function(){return e({type:"START_LOAD_USER"})}}})(Object(f.a)(function(e){return{root:{flexGrow:1},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20},appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,padding:e.spacing(3),height:"100vh",overflow:"auto"}}})(Q)),Z=n(49),$=n(135),ee=n(21),te=n.n(ee),ne=n(26),re=n(110),ae=n.n(re),oe=n(111),ie=n.n(oe),ce=n(134),se=n.n(ce),ue=te.a.mark(Se),le=te.a.mark(je),me=te.a.mark(Ce),pe=te.a.mark(ke),ge=te.a.mark(ye),fe=te.a.mark(xe),Ee=te.a.mark(Te),be=te.a.mark(Ie),de=te.a.mark(Re),he=te.a.mark(_e),Oe=te.a.mark(Ae),ve=new ie.a,we="https://github-auth-backend-hugh.glitch.me/start_auth";function Se(){var e;return te.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=ae.a.parse(window.location.search.substring(1))).access_token){t.next=6;break}return t.next=4,Object(ne.c)({type:"SET_ACCESS_TOKEN",access_token:e.access_token});case 4:return t.next=6,Re();case 6:case"end":return t.stop()}},ue)}function je(){return te.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ne.e)("INIT",Se);case 2:case"end":return e.stop()}},le)}function Ce(){var e,t;return te.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e={redirect_uri:window.location.origin+window.location.pathname,scope:["repo"]},t="".concat(we,"?").concat(ae.a.stringify(e)),n.next=4,window.location=t;case 4:case"end":return n.stop()}},me)}function ke(){return te.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ne.e)("START_LOG_IN",Ce);case 2:case"end":return e.stop()}},pe)}function ye(e){var t,n,r,a,o;return te.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(ne.d)(function(e){return e.accessToken});case 2:return t=i.sent,i.next=5,Object(ne.d)(function(e){return e.user.login});case 5:return n=i.sent,r="query {\n    viewer {\n      repositories (first:100".concat(e?', after:"'+e+'"':"",") {\n        pageInfo {\n          endCursor\n        }\n        totalCount,\n        nodes {\n          id,\n          name,\n          description,\n          createdAt,\n          repositoryTopics(first:100) {\n            nodes {\n              topic {\n                id\n                name\n              }\n            }\n          }\n          stargazers {totalCount},\n          primaryLanguage {\n            name\n          }\n          isPrivate\n          isArchived\n          issues (states: OPEN) {\n            totalCount\n          }\n          owner {\n            login\n          }\n          nameWithOwner\n          url\n          isFork\n          licenseInfo {\n            name\n            nickname\n          }\n          vulnerabilityAlerts (first:50){\n            nodes {\n              packageName\n              vulnerableManifestFilename\n              vulnerableRequirements\n              securityAdvisory {\n                description\n                summary\n              }\n            }\n          }\n          collaborators (first: 50){\n            nodes {\n              name\n              login\n            }\n          }\n        }\n      }\n    }\n  }"),i.prev=7,i.next=10,Object(ne.b)(function(){return se()({query:r,headers:{authorization:"token ".concat(t),accept:"application/vnd.github.vixen-preview+json"}})});case 10:a=i.sent,i.next=16;break;case 13:i.prev=13,i.t0=i.catch(7),a=i.t0.data;case 16:return o=a.viewer.repositories.nodes.map(function(e){return{id:e.id,name:e.name,nameWithOnwer:e.nameWithOwner,description:e.description,createdAt:e.createdAt,topics:e.repositoryTopics.nodes.map(function(e){return e.topic.name}),stars:e.stargazers.totalCount,language:(t=e.primaryLanguage,t&&t.name),isPrivate:e.isPrivate,isArchived:e.isArchived,url:e.url,owner:e.owner.login,isFork:e.isFork,licenseNickname:e.licenseInfo&&(e.licenseInfo.nickname||e.licenseInfo.name),vulnerabilityAlerts:e.vulnerabilityAlerts.nodes,collaborators:e.collaborators&&e.collaborators.nodes.filter(function(e){return e.login!==n}),issueCount:e.issues.totalCount};var t}),i.next=19,Object(ne.c)({type:"SET_REPOSITORIES",repositories:o});case 19:return i.next=21,Object(ne.d)(function(e){return e.repositories.length});case 21:if(!(i.sent<a.viewer.repositories.totalCount)){i.next=25;break}return i.next=25,ye(a.viewer.repositories.pageInfo.endCursor);case 25:case"end":return i.stop()}},ge,null,[[7,13]])}function xe(){return te.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ne.e)("START_LOAD_REPOSITORIES",ye);case 2:case"end":return e.stop()}},fe)}function Te(){return te.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ne.c)({type:"DELETE_REPOSITORIES"});case 2:return e.next=4,ye();case 4:case"end":return e.stop()}},Ee)}function Ie(){return te.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ne.e)("REFRESH_REPOSITORIES",Te);case 2:case"end":return e.stop()}},be)}function Re(){var e,t,n,r;return te.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(ne.d)(function(e){return e.accessToken});case 2:return e=a.sent,ve=new ie.a({auth:"token ".concat(e)}),t={owner:"hughrawlinson",repo:"github-repo-organizer"},a.next=7,Object(ne.b)(function(){return ve.users.getAuthenticated()});case 7:if(n=a.sent,"hughrawlinson"===(r=n.data).login){a.next=19;break}return a.prev=10,a.next=13,Object(ne.b)(function(){return ve.activity.checkStarringRepo(t)});case 13:a.next=19;break;case 15:return a.prev=15,a.t0=a.catch(10),a.next=19,Object(ne.b)(function(){return ve.activity.starRepo(t)});case 19:return a.next=21,Object(ne.c)({type:"SET_USER",user:r});case 21:return a.next=23,ye();case 23:case"end":return a.stop()}},de,null,[[10,15]])}function _e(){return te.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ne.e)("START_LOAD_USER",Re);case 2:case"end":return e.stop()}},he)}function Ae(){return te.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ne.a)([je(),ke(),xe(),_e(),Ie()]);case 2:case"end":return e.stop()}},Oe)}var Le=n(112),Ne={loggedIn:!1,gridState:{filteringState:[],sortingState:[],searchState:"",columnVisibilityState:["isPrivate","isArchived","isFork","owner","licenseNickname","vulnerabilityAlerts","collaborators","issueCount"]}},Pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ACCESS_TOKEN":return Object(c.a)({},e,{accessToken:t.access_token,loggedIn:!0});case"SET_REPOSITORIES":return Object(c.a)({},e,{repositories:[].concat(Object(Le.a)(e.repositories||[]),Object(Le.a)(t.repositories))});case"DELETE_REPOSITORIES":return Object(c.a)({},e,{repositories:[]});case"SET_USER":return Object(c.a)({},e,{user:t.user});case"SET_GRID_STATE":return Object(c.a)({},e,{gridState:t.gridState});default:return e}},De=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Z.c,Fe=Object($.a)(),ze=Object(Z.d)(Pe,De(Object(Z.a)(Fe)));Fe.run(Ae),ze.dispatch({type:"INIT"}),i.a.render(a.a.createElement(j.a,{store:ze},a.a.createElement(Y,null)),document.getElementById("root"))}},[[144,1,2]]]);
//# sourceMappingURL=main.e4dc0720.chunk.js.map