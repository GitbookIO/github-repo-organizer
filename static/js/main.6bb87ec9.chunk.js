(this["webpackJsonpgithub-repo-organizer"]=this["webpackJsonpgithub-repo-organizer"]||[]).push([[0],{115:function(e,t,n){e.exports=n(134)},134:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(13),i=n.n(o),s=n(22),c=n(9),l=n(183),u=n(181),m=n(70),p=n(180),g=n(178),d=n(98),E=n.n(d),h=n(182),b=n(50),f=n(185),O=n(177),S=n(186),w=n(179),v=n(54),y=n(21),C=n(91),R=n.n(C);class T extends a.Component{render(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{variant:"display1"},"Log in!"),r.a.createElement(m.a,{paragraph:!0},"Please log in with GitHub to start organizing your repositories."))}}var k=T,x=n(135),j=n(187),I=n(20),A=n(8);const _=e=>r.a.createElement(A.b,Object.assign({formatterComponent:({value:e})=>e.toLocaleDateString()},e)),L=e=>r.a.createElement(A.b,Object.assign({formatterComponent:({value:{href:e,title:t}})=>r.a.createElement("a",{href:e},t)},e)),N=e=>r.a.createElement(A.b,Object.assign({formatterComponent:({value:e})=>e?r.a.createElement(r.a.Fragment,null,e.map(e=>r.a.createElement(j.a,{style:{margin:"3px"},key:e,label:e}))):null},e)),F=e=>r.a.createElement(A.b,Object.assign({formatterComponent:({value:e})=>r.a.createElement(j.a,{label:e?"True":"False"})},e)),G=e=>r.a.createElement(A.b,Object.assign({formatterComponent:({value:e})=>e.length},e)),P=[{columnName:"topics",wordWrapEnabled:!0},{columnName:"description",wordWrapEnabled:!0}];var D=Object(b.b)(e=>({gridState:e.gridState}),e=>({setGridState:t=>e({type:"SET_GRID_STATE",gridState:t})}))(Object(c.a)(e=>({}))((function({repositories:e,gridState:t,setGridState:n}){return r.a.createElement(x.a,null,r.a.createElement(I.b,{columns:[{name:"name",title:"Name",getCellValue:e=>({href:e.url,title:e.name})},{name:"description",title:"Description"},{name:"createdAt",title:"Created At",getCellValue:e=>new Date(e.createdAt)},{name:"topics",title:"Topics"},{name:"stars",title:"Stars"},{name:"language",title:"Language"},{name:"owner",title:"Owner"},{name:"isPrivate",title:"Private"},{name:"isArchived",title:"Archived"},{name:"isFork",title:"Fork"},{name:"licenseNickname",title:"License"},{name:"vulnerabilityAlerts",title:"Vulnerability Alerts"},{name:"collaborators",title:"Collaborators",getCellValue:e=>e.collaborators&&e.collaborators.map(e=>e.login)},{name:"issueCount",title:"Open Issue Count"},{name:"pullRequestCount",title:"Open Pull Request Count"}],rows:e},r.a.createElement(_,{for:["createdAt"]}),r.a.createElement(L,{for:["name"]}),r.a.createElement(N,{for:["topics","collaborators"]}),r.a.createElement(F,{for:["isPrivate","isArchived","isFork"]}),r.a.createElement(G,{for:["vulnerabilityAlerts"]}),r.a.createElement(A.e,{defaultFilters:[],filters:t.filteringState,onFiltersChange:function(e){n(Object(s.a)({},t,{filteringState:e}))}}),r.a.createElement(A.p,{defaultSorting:[],sorting:t.sortingState,onSortingChange:function(e){n(Object(s.a)({},t,{sortingState:e}))}}),r.a.createElement(A.m,{defaultCurrentPage:0,pageSize:40}),r.a.createElement(A.o,{value:t.searchState,onValueChange:function(e){n(Object(s.a)({},t,{searchState:e}))}}),r.a.createElement(A.i,null),r.a.createElement(A.k,null),r.a.createElement(A.j,null),r.a.createElement(I.e,{columnExtensions:P}),r.a.createElement(I.h,{showSortingControls:!0}),r.a.createElement(I.g,{showFilterSelector:!0}),r.a.createElement(I.f,{hiddenColumnNames:t.columnVisibilityState,onHiddenColumnNamesChange:function(e){n(Object(s.a)({},t,{columnVisibilityState:e}))}}),r.a.createElement(I.i,null),r.a.createElement(I.d,null),r.a.createElement(I.a,null),r.a.createElement(I.c,null)))})));function z(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(D,{repositories:e.repositories}))}var q=e=>{const t=e.repositories.flatMap(e=>e.topics).reduce((e,t)=>Object(s.a)({},e,{[t]:e[t]?e[t]+1:1}),{});const n=Object.entries(t).map(([e,t])=>({topicName:e,topicCount:t}));return r.a.createElement(x.a,null,r.a.createElement(I.b,{columns:[{name:"topicName",title:"Topic Name"},{name:"topicCount",title:"Topic Count"}],rows:n},r.a.createElement(A.p,{defaultSorting:[{columnName:"topicCount",direction:"desc"}]}),r.a.createElement(A.k,null),r.a.createElement(I.e,null),r.a.createElement(I.h,{showSortingControls:!0})))};var H=e=>{const t=e.repositories.map(e=>e.licenseNickname).reduce((e,t)=>Object(s.a)({},e,{[t]:e[t]?e[t]+1:1}),{});const n=Object.entries(t).map(([e,t])=>({license:e,licenseCount:t}));return r.a.createElement(x.a,null,r.a.createElement(I.b,{columns:[{name:"license",title:"License"},{name:"licenseCount",title:"License Count"}],rows:n},r.a.createElement(A.p,{defaultSorting:[{columnName:"licenseCount",direction:"desc"}]}),r.a.createElement(A.k,null),r.a.createElement(I.e,null),r.a.createElement(I.h,{showSortingControls:!0})))};var V=e=>{const t=e.repositories.map(e=>e.language).reduce((e,t)=>Object(s.a)({},e,{[t]:e[t]?e[t]+1:1}),{});const n=Object.entries(t).map(([e,t])=>({language:e,languageCount:t}));return r.a.createElement(x.a,null,r.a.createElement(I.b,{columns:[{name:"language",title:"Language"},{name:"languageCount",title:"Count"}],rows:n},r.a.createElement(A.p,{defaultSorting:[{columnName:"languageCount",direction:"desc"}]}),r.a.createElement(A.k,null),r.a.createElement(I.e,null),r.a.createElement(I.h,{showSortingControls:!0})))};class W extends a.Component{constructor(e){super(e),this.state={drawerOpen:!1},this.ifLoggedOut=this.ifLoggedOut.bind(this),this.ifLoggedIn=this.ifLoggedIn.bind(this),this.ifRepositories=this.ifRepositories.bind(this)}toggleDrawer(e){this.setState(t=>Object(s.a)({},t,{drawerOpen:e||!t.drawerOpen}))}ifRepositories(e){return this.props.repositories?e:null}ifLoggedOut(e){return this.props.loggedIn?null:e}ifLoggedIn(e){return this.props.loggedIn?e:null}render(){const e=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,null),r.a.createElement(v.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(l.a,null,r.a.createElement(u.a,null,this.ifLoggedIn(r.a.createElement(g.a,{className:e.menuButton,color:"inherit","aria-label":"Menu",onClick:()=>this.toggleDrawer()},r.a.createElement(E.a,null))),r.a.createElement(m.a,{variant:"h6",color:"inherit",className:e.grow},"GitHub Repo Organizer"),this.ifLoggedOut(r.a.createElement(p.a,{onClick:this.props.startLogIn,color:"inherit"},"Login")),this.ifLoggedIn(r.a.createElement(p.a,{onClick:this.props.refresh,color:"inherit"},"Refresh")))),r.a.createElement(f.a,{open:this.state.drawerOpen,onClose:()=>this.toggleDrawer(!1)},r.a.createElement("div",{onClick:()=>this.toggleDrawer(!1),onKeyDown:()=>this.toggleDrawer(!1)},r.a.createElement(O.a,null,r.a.createElement(S.a,{button:!0},r.a.createElement(v.b,{to:"/github-repo-organizer/"},r.a.createElement(w.a,{primary:"Repositories"}))),r.a.createElement(S.a,{button:!0},r.a.createElement(v.b,{to:"/github-repo-organizer/topics"},r.a.createElement(w.a,{primary:"Topics"}))),r.a.createElement(S.a,{button:!0},r.a.createElement(v.b,{to:"/github-repo-organizer/licenses"},r.a.createElement(w.a,{primary:"Licenses"}))),r.a.createElement(S.a,{button:!0},r.a.createElement(v.b,{to:"/github-repo-organizer/languages"},r.a.createElement(w.a,{primary:"Languages"})))))),r.a.createElement("main",{className:e.content},r.a.createElement("div",{className:e.appBarSpacer}),this.ifLoggedOut(r.a.createElement(k,null)),this.ifLoggedIn(r.a.createElement(y.c,null,r.a.createElement(y.a,{exact:!0,path:"/github-repo-organizer/",component:e=>{const t=R.a.parse(e.location.search);return t.gridState&&this.props.setGridState(JSON.parse(t.gridState)),r.a.createElement(z,{queryParams:t,repositories:this.props.repositories||[]})}}),r.a.createElement(y.a,{exact:!0,path:"/github-repo-organizer/topics",component:()=>r.a.createElement(q,{repositories:this.props.repositories})}),r.a.createElement(y.a,{exact:!0,path:"/github-repo-organizer/licenses",component:()=>r.a.createElement(H,{repositories:this.props.repositories})}),r.a.createElement(y.a,{exact:!0,path:"/github-repo-organizer/languages",component:()=>r.a.createElement(V,{repositories:this.props.repositories})})))))))}}var U=Object(b.b)(e=>({loggedIn:e.loggedIn,repositories:e.repositories}),e=>({startLogIn:()=>e({type:"START_LOG_IN"}),refresh:()=>e({type:"REFRESH_REPOSITORIES"}),loadRepositories:()=>e({type:"START_LOAD_REPOSITORIES"}),loadUser:()=>e({type:"START_LOAD_USER"}),setGridState:t=>e({type:"SET_GRID_STATE",gridState:t})}))(Object(c.a)(e=>({root:{flexGrow:1},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20},appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,padding:e.spacing(3),height:"100vh",overflow:"auto"}}))(W)),B=n(45),M=n(104),Q=n(18),J=n.n(Q),K=n(24),X=n(80),Y=n.n(X),Z=n(81),$=n(65),ee={description:{getColumnName:()=>"description",getColumnType:()=>({dataType:"string",dataSource:"GitHubGraphQL"}),getColumnFragment:()=>({name:"description",fragment:"fragment description on Repository { description } "})},name:{getColumnName:()=>"name",getColumnType:()=>({dataType:"string",dataSource:"GitHubGraphQL"}),getColumnFragment:()=>({name:"name",fragment:"fragment name on Repository { name } "})},createdAt:{getColumnName:()=>"createdAt",getColumnType:()=>({dataType:"string",dataSource:"GitHubGraphQL"}),getColumnFragment:()=>({name:"createdAt",fragment:" fragment createdAt on Repository { createdAt } "})},repositoryTopics:{getColumnName:()=>"repositoryTopics",getColumnType:()=>({dataType:"string",dataSource:"GitHubGraphQL"}),getColumnFragment:()=>({name:"repositoryTopics",fragment:"fragment repositoryTopics on Repository { repositoryTopics(first:100) { nodes { topic { id name } } } }"})}};var te=e=>"query {\n    viewer {\n      repositories (first:100".concat(e?', after:"'+e+'"':"",") {\n        pageInfo {\n          endCursor\n        }\n        totalCount\n        nodes {\n          id\n          ").concat(Object.values(ee).map(e=>"...".concat(e.getColumnFragment().name,"\n")),"\n          ...stargazers\n          ...primaryLanguage\n          ...private\n          ...archived\n          ...issues\n          ...pullRequestCount\n          ...owner\n          ...nameWithOwner\n          ...url\n          ...fork\n          ...licenses\n          ...vulnerabilityAlerts\n          ...collaborators\n        }\n      }\n    }\n  }\n\n").concat(Object.values(ee).map(e=>e.getColumnFragment().fragment),"\n\nfragment stargazers on Repository {\n  stargazers {\n    totalCount\n  }\n}\n\nfragment primaryLanguage on Repository {\n  primaryLanguage {\n    name\n  }\n}\n\nfragment private on Repository {\n  isPrivate\n}\n\nfragment archived on Repository {\n  isArchived\n}\n\nfragment issues on Repository {\n  issues (states: OPEN) {\n    totalCount\n  }\n}\n\nfragment pullRequestCount on Repository {\n  pullRequests (states: OPEN) {\n    totalCount\n  }\n}\n\nfragment owner on Repository {\n  owner {\n    login\n  }\n}\n\nfragment nameWithOwner on Repository {\n  nameWithOwner\n}\n\nfragment url on Repository {\n  url\n}\n\nfragment fork on Repository {\n  isFork\n}\n\nfragment licenses on Repository {\n  licenseInfo {\n    name\n    nickname\n  }\n}\n\nfragment vulnerabilityAlerts on Repository {\n  vulnerabilityAlerts (first:50){\n    nodes {\n      packageName\n      vulnerableManifestFilename\n      vulnerableRequirements\n      securityAdvisory {\n        description\n        summary\n      }\n    }\n  }\n}\n\nfragment collaborators on Repository {\n  collaborators (first: 50){\n    nodes {\n      name\n      login\n    }\n  }\n}\n"),ne=J.a.mark(de),ae=J.a.mark(Ee),re=J.a.mark(he),oe=J.a.mark(be),ie=J.a.mark(fe),se=J.a.mark(Oe),ce=J.a.mark(Se),le=J.a.mark(we),ue=J.a.mark(ve),me=J.a.mark(ye),pe=J.a.mark(Ce);let ge=new Z.a;function de(){var e;return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=Y.a.parse(window.location.search.substring(1))).access_token){t.next=6;break}return t.next=4,Object(K.c)({type:"SET_ACCESS_TOKEN",access_token:e.access_token});case 4:return t.next=6,ve();case 6:case"end":return t.stop()}}),ne)}function Ee(){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(K.e)("INIT",de);case 2:case"end":return e.stop()}}),ae)}function he(){var e,t;return J.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e={redirect_uri:window.location.origin+window.location.pathname,scope:["repo"]},t="".concat("https://github-auth-backend-hugh.glitch.me/start_auth","?").concat(Y.a.stringify(e)),n.next=4,window.location=t;case 4:case"end":return n.stop()}}),re)}function be(){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(K.e)("START_LOG_IN",he);case 2:case"end":return e.stop()}}),oe)}function fe(e){var t,n,a,r;return J.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(K.d)(e=>e.accessToken);case 2:return t=o.sent,o.next=5,Object(K.d)(e=>e.user.login);case 5:return n=o.sent,o.prev=6,o.next=9,Object(K.b)(()=>Object($.a)({query:te(e),headers:{authorization:"token ".concat(t),accept:"application/vnd.github.vixen-preview+json"}}));case 9:a=o.sent,o.next=15;break;case 12:o.prev=12,o.t0=o.catch(6),a=o.t0.data;case 15:return r=a.viewer.repositories.nodes.map(e=>{return{id:e.id,name:e.name,nameWithOnwer:e.nameWithOwner,description:e.description,createdAt:e.createdAt,topics:e.repositoryTopics.nodes.map(e=>e.topic.name),stars:e.stargazers.totalCount,language:(t=e.primaryLanguage,t&&t.name),isPrivate:e.isPrivate,isArchived:e.isArchived,url:e.url,owner:e.owner.login,isFork:e.isFork,licenseNickname:e.licenseInfo&&(e.licenseInfo.nickname||e.licenseInfo.name),vulnerabilityAlerts:e.vulnerabilityAlerts.nodes,collaborators:e.collaborators&&e.collaborators.nodes.filter(e=>e.login!==n),issueCount:e.issues.totalCount,pullRequestCount:e.pullRequests.totalCount};var t}),o.next=18,Object(K.c)({type:"SET_REPOSITORIES",repositories:r});case 18:return o.next=20,Object(K.d)(e=>e.repositories.length);case 20:if(!(o.sent<a.viewer.repositories.totalCount)){o.next=24;break}return o.next=24,fe(a.viewer.repositories.pageInfo.endCursor);case 24:case"end":return o.stop()}}),ie,null,[[6,12]])}function Oe(){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(K.e)("START_LOAD_REPOSITORIES",fe);case 2:case"end":return e.stop()}}),se)}function Se(){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(K.c)({type:"DELETE_REPOSITORIES"});case 2:return e.next=4,fe();case 4:case"end":return e.stop()}}),ce)}function we(){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(K.e)("REFRESH_REPOSITORIES",Se);case 2:case"end":return e.stop()}}),le)}function ve(){var e,t,n,a;return J.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(K.d)(e=>e.accessToken);case 2:return e=r.sent,ge=new Z.a({auth:"token ".concat(e)}),t={owner:"hughrawlinson",repo:"github-repo-organizer"},r.next=7,Object(K.b)(()=>ge.users.getAuthenticated());case 7:if(n=r.sent,"hughrawlinson"===(a=n.data).login){r.next=19;break}return r.prev=10,r.next=13,Object(K.b)(()=>ge.activity.checkStarringRepo(t));case 13:r.next=19;break;case 15:return r.prev=15,r.t0=r.catch(10),r.next=19,Object(K.b)(()=>ge.activity.starRepo(t));case 19:return r.next=21,Object(K.c)({type:"SET_USER",user:a});case 21:return r.next=23,fe();case 23:case"end":return r.stop()}}),ue,null,[[10,15]])}function ye(){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(K.e)("START_LOAD_USER",ve);case 2:case"end":return e.stop()}}),me)}function Ce(){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(K.a)([Ee(),be(),Oe(),ye(),we()]);case 2:case"end":return e.stop()}}),pe)}const Re={loggedIn:!1,gridState:{filteringState:[],sortingState:[],searchState:"",columnVisibilityState:["isPrivate","isArchived","isFork","owner","licenseNickname","vulnerabilityAlerts","collaborators","issueCount"]}};var Te=(e=Re,t)=>{switch(t.type){case"SET_ACCESS_TOKEN":return Object(s.a)({},e,{accessToken:t.access_token,loggedIn:!0});case"SET_REPOSITORIES":return Object(s.a)({},e,{repositories:[...e.repositories||[],...t.repositories]});case"DELETE_REPOSITORIES":return Object(s.a)({},e,{repositories:[]});case"SET_USER":return Object(s.a)({},e,{user:t.user});case"SET_GRID_STATE":return Object(s.a)({},e,{gridState:t.gridState});default:return e}};const ke=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||B.c,xe=Object(M.a)(),je=Object(B.d)(Te,ke(Object(B.a)(xe)));xe.run(Ce),je.dispatch({type:"INIT"}),i.a.render(r.a.createElement(b.a,{store:je},r.a.createElement(U,null)),document.getElementById("root"))}},[[115,1,2]]]);
//# sourceMappingURL=main.6bb87ec9.chunk.js.map