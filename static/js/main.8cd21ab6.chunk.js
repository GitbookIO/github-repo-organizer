(this["webpackJsonpgithub-repo-organizer"]=this["webpackJsonpgithub-repo-organizer"]||[]).push([[0],{154:function(e,t,n){"use strict";n.r(t),n.d(t,"useAppDispatch",(function(){return Ze}));var r=n(15),a=n.n(r),c=n(10),o=n(206),i=n(58),s=n(21),u=n(32),l=n(5);function j(e){var t=e.children,n=e.selectedLoginState;return Object(u.c)((function(e){return e.userLoginReducer.login}))===n?Object(l.jsx)(l.Fragment,{children:t}):null}var b=n(36),p=n(79),d=n(40),O=n(41),f=n(0),m=n.n(f),g=n(90),x=function(e){Object(d.a)(n,e);var t=Object(O.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return Object(l.jsxs)(m.a.Fragment,{children:[Object(l.jsx)(g.a,{variant:"h1",children:"Log in!"}),Object(l.jsx)(g.a,{paragraph:!0,children:"Please log in with GitHub to start organizing your repositories."})]})}}]),n}(f.Component),h=n(13),v=n(156),w=n(23),C=n(9),y=n(102),S=n(56),k={gridState:{filteringState:[],sortingState:[],searchState:"",columnVisibilityState:["isPrivate","isArchived","isFork","owner","licenseNickname","vulnerabilityAlerts","collaborators","issueCount"]},repositories:[]},R=Object(S.c)({name:"mainSlice",initialState:k,reducers:{setRepositories:function(e,t){var n=t.payload;return Object(h.a)(Object(h.a)({},e),{},{repositories:[].concat(Object(y.a)(e.repositories||[]),Object(y.a)(n.repositories))})},deleteRepositories:function(e){return Object(h.a)(Object(h.a)({},e),{},{repositories:[]})},setGridState:function(e,t){var n=t.payload;return Object(h.a)(Object(h.a)({},e),{},{gridState:n})}}}),L=R.actions,A=L.setRepositories,T=L.deleteRepositories,N=L.setGridState,F=Object(S.b)("REFRESH_REPOSITORIES"),I=R.reducer;function z(e){return Object(l.jsx)(C.b,Object(h.a)({formatterComponent:function(e){return e.value.toLocaleDateString()}},e))}function P(e){return Object(l.jsx)(C.b,Object(h.a)({formatterComponent:function(e){var t=e.value,n=t.href,r=t.title;return Object(l.jsx)("a",{href:n,children:r})}},e))}var E=n(209);function G(e){return Object(l.jsx)(C.b,Object(h.a)({formatterComponent:function(e){var t=e.value;return t?Object(l.jsx)(l.Fragment,{children:t.map((function(e){return Object(l.jsx)(E.a,{style:{margin:"3px"},label:e},e)}))}):null}},e))}function _(e){return Object(l.jsx)(C.b,Object(h.a)({formatterComponent:function(e){return e.value.length}},e))}function D(e){return Object(l.jsx)(C.b,Object(h.a)({formatterComponent:function(e){var t=e.value;return Object(l.jsx)(E.a,{label:t?"True":"False"})}},e))}function V(e){return Object(l.jsx)(C.b,Object(h.a)({formatterComponent:function(e){var t=e.value;return Object(l.jsx)("input",{type:"checkbox",value:t})}},e))}var q=[{columnName:"topics",wordWrapEnabled:!0},{columnName:"description",wordWrapEnabled:!0}];function H(){var e=Object(u.c)((function(e){return e.reducer.gridState})),t=Object(u.c)((function(e){return e.reducer.repositories})),n=Ze();return Object(l.jsx)(v.a,{children:Object(l.jsxs)(w.b,{columns:[{name:"selected",title:"Selected",getCellValue:function(e){return!1}},{name:"name",title:"Name",getCellValue:function(e){return{href:e.url,title:e.name}}},{name:"description",title:"Description"},{name:"createdAt",title:"Created At",getCellValue:function(e){return new Date(e.createdAt)}},{name:"topics",title:"Topics"},{name:"stars",title:"Stars"},{name:"language",title:"Language"},{name:"owner",title:"Owner"},{name:"isPrivate",title:"Private"},{name:"isArchived",title:"Archived"},{name:"isFork",title:"Fork"},{name:"licenseNickname",title:"License"},{name:"vulnerabilityAlerts",title:"Vulnerability Alerts"},{name:"collaborators",title:"Collaborators",getCellValue:function(e){return e.collaborators&&e.collaborators.map((function(e){return e.login}))}},{name:"issueCount",title:"Open Issue Count"},{name:"pullRequestCount",title:"Open Pull Request Count"}],rows:t,children:[Object(l.jsx)(z,{for:["createdAt"]}),Object(l.jsx)(P,{for:["name"]}),Object(l.jsx)(G,{for:["topics","collaborators"]}),Object(l.jsx)(D,{for:["isPrivate","isArchived","isFork"]}),Object(l.jsx)(_,{for:["vulnerabilityAlerts"]}),Object(l.jsx)(V,{for:["selected"]}),Object(l.jsx)(C.e,{defaultFilters:[],filters:e.filteringState,onFiltersChange:function(t){n(N(Object(h.a)(Object(h.a)({},e),{},{filteringState:t})))}}),Object(l.jsx)(C.p,{defaultSorting:[],sorting:e.sortingState,onSortingChange:function(t){n(N(Object(h.a)(Object(h.a)({},e),{},{sortingState:t})))}}),Object(l.jsx)(C.m,{defaultCurrentPage:0,pageSize:40}),Object(l.jsx)(C.o,{value:e.searchState,onValueChange:function(t){n(N(Object(h.a)(Object(h.a)({},e),{},{searchState:t})))}}),Object(l.jsx)(C.i,{}),Object(l.jsx)(C.k,{}),Object(l.jsx)(C.j,{}),Object(l.jsx)(w.e,{columnExtensions:q}),Object(l.jsx)(w.h,{showSortingControls:!0}),Object(l.jsx)(w.g,{showFilterSelector:!0}),Object(l.jsx)(w.f,{hiddenColumnNames:e.columnVisibilityState,onHiddenColumnNamesChange:function(t){var r=N(Object(h.a)(Object(h.a)({},e),{},{columnVisibilityState:t}));console.log(r),n(r)}}),Object(l.jsx)(w.i,{}),Object(l.jsx)(w.d,{}),Object(l.jsx)(w.a,{}),Object(l.jsx)(w.c,{})]})})}function W(){return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)(H,{})})}var B=n(27),U=function(){var e=Object(u.c)((function(e){return e.reducer.repositories}));if(!e)return Object(l.jsx)("p",{children:"Loading"});var t=function(e){return e.flatMap((function(e){return e.topics})).reduce((function(e,t){return Object(h.a)(Object(h.a)({},e),{},{[t]:e[t]?e[t]+1:1})}),{})}(e),n=Object.entries(t).map((function(e){var t=Object(B.a)(e,2);return{topicName:t[0],topicCount:t[1]}}));return Object(l.jsx)(v.a,{children:Object(l.jsxs)(w.b,{columns:[{name:"topicName",title:"Topic Name"},{name:"topicCount",title:"Topic Count"}],rows:n,children:[Object(l.jsx)(C.p,{defaultSorting:[{columnName:"topicCount",direction:"desc"}]}),Object(l.jsx)(C.k,{}),Object(l.jsx)(w.e,{}),Object(l.jsx)(w.h,{showSortingControls:!0})]})})},Q=function(){var e=function(e){return e.map((function(e){return e.licenseNickname})).reduce((function(e,t){return Object(h.a)(Object(h.a)({},e),{},{[t]:e[t]?e[t]+1:1})}),{})}(Object(u.c)((function(e){return e.reducer.repositories}))),t=Object.entries(e).map((function(e){var t=Object(B.a)(e,2);return{license:t[0],licenseCount:t[1]}}));return Object(l.jsx)(v.a,{children:Object(l.jsxs)(w.b,{columns:[{name:"license",title:"License"},{name:"licenseCount",title:"License Count"}],rows:t,children:[Object(l.jsx)(C.p,{defaultSorting:[{columnName:"licenseCount",direction:"desc"}]}),Object(l.jsx)(C.k,{}),Object(l.jsx)(w.e,{}),Object(l.jsx)(w.h,{showSortingControls:!0})]})})},J=function(){var e=Object(u.c)((function(e){return e.reducer.repositories}));if(!e)return Object(l.jsx)("p",{children:"Loading"});var t=function(e){return e.map((function(e){return e.language})).reduce((function(e,t){return Object(h.a)(Object(h.a)({},e),{},{[t]:e[t]?e[t]+1:1})}),{})}(e),n=Object.entries(t).map((function(e){var t=Object(B.a)(e,2);return{language:t[0],languageCount:t[1]}}));return Object(l.jsx)(v.a,{children:Object(l.jsxs)(w.b,{columns:[{name:"language",title:"Language"},{name:"languageCount",title:"Count"}],rows:n,children:[Object(l.jsx)(C.p,{defaultSorting:[{columnName:"languageCount",direction:"desc"}]}),Object(l.jsx)(C.k,{}),Object(l.jsx)(w.e,{}),Object(l.jsx)(w.h,{showSortingControls:!0})]})})};function M(){return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(j,{selectedLoginState:!1,children:Object(l.jsx)(x,{})}),Object(l.jsx)(j,{selectedLoginState:!0,children:Object(l.jsxs)(s.c,{children:[Object(l.jsx)(s.a,{exact:!0,path:"/github-repo-organizer/",component:W}),Object(l.jsx)(s.a,{exact:!0,path:"/github-repo-organizer/topics",component:U}),Object(l.jsx)(s.a,{exact:!0,path:"/github-repo-organizer/licenses",component:Q}),Object(l.jsx)(s.a,{exact:!0,path:"/github-repo-organizer/languages",component:J})]})})]})}var K=n(200),X=n(208),Y=n(199),Z=n(201),$=n(202),ee=n(119),te=n.n(ee),ne=Object(f.createContext)({drawerOpen:!1,toggleDrawer:function(e){}});function re(e){var t=e.children,n=Object(f.useState)(!1),r=Object(B.a)(n,2),a=r[0],c=r[1];return Object(l.jsx)(ne.Provider,{value:{drawerOpen:a,toggleDrawer:function(e){c("undefined"!==typeof e?e:!a)}},children:t})}function ae(e){var t=Object(f.useContext)(ne).toggleDrawer;return Object(l.jsx)(K.a,Object(h.a)(Object(h.a)({onClick:function(){return t()}},e),{},{children:Object(l.jsx)(te.a,{})}))}function ce(){var e=Object(f.useContext)(ne),t=e.drawerOpen,n=e.toggleDrawer;return Object(l.jsx)(X.a,{open:t,onClose:function(){return n(!1)},children:Object(l.jsx)("div",{onClick:function(){return n(!1)},onKeyDown:function(){return n(!1)},children:Object(l.jsxs)(Y.a,{children:[Object(l.jsx)(Z.a,{button:!0,children:Object(l.jsx)(i.b,{to:"/github-repo-organizer/",children:Object(l.jsx)($.a,{primary:"Repositories"})})}),Object(l.jsx)(Z.a,{button:!0,children:Object(l.jsx)(i.b,{to:"/github-repo-organizer/topics",children:Object(l.jsx)($.a,{primary:"Topics"})})}),Object(l.jsx)(Z.a,{button:!0,children:Object(l.jsx)(i.b,{to:"/github-repo-organizer/licenses",children:Object(l.jsx)($.a,{primary:"Licenses"})})}),Object(l.jsx)(Z.a,{button:!0,children:Object(l.jsx)(i.b,{to:"/github-repo-organizer/languages",children:Object(l.jsx)($.a,{primary:"Languages"})})})]})})})}var oe=n(203),ie={accessToken:void 0,login:!1},se=Object(S.c)({name:"userLoginSlice",initialState:ie,reducers:{setAccessToken:function(e,t){return{accessToken:t.payload.access_token,login:!0}},setUser:function(e,t){var n=t.payload;return Object(h.a)(Object(h.a)({},e),{},{user:n.user})}}}),ue=se.actions,le=ue.setAccessToken,je=ue.setUser,be=Object(S.b)("START_LOG_IN"),pe=se.reducer;function de(e){var t=Ze();return Object(l.jsx)(j,{selectedLoginState:!1,children:Object(l.jsx)(oe.a,Object(h.a)(Object(h.a)({onClick:function(){t(be())}},e),{},{children:"Login"}))})}var Oe=n(205),fe=n(204);var me=Object(c.a)((function(){return{grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20}}}))((function(e){var t=e.classes,n=Ze();return Object(l.jsx)(Oe.a,{children:Object(l.jsxs)(fe.a,{children:[Object(l.jsx)(j,{selectedLoginState:!0,children:Object(l.jsx)(ae,{className:t.menuButton,color:"inherit","aria-label":"Menu"})}),Object(l.jsx)(g.a,{variant:"h6",color:"inherit",className:t.grow,children:"GitHub Repo Organizer"}),Object(l.jsx)(de,{color:"inherit"}),Object(l.jsx)(j,{selectedLoginState:!0,children:Object(l.jsx)(oe.a,{onClick:function(){return n(F())},color:"inherit",children:"Refresh"})})]})})}));var ge=Object(c.a)((function(e){return{root:{flexGrow:1},appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,padding:e.spacing(3),height:"100vh",overflow:"auto"}}}))((function(e){var t=e.classes;return Object(l.jsxs)(re,{children:[Object(l.jsx)(o.a,{}),Object(l.jsx)(i.a,{children:Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)(me,{}),Object(l.jsx)(ce,{}),Object(l.jsxs)("main",{className:t.content,children:[Object(l.jsx)("div",{className:t.appBarSpacer}),Object(l.jsx)(M,{})]})]})})]})})),xe=n(123),he=n(20),ve=n.n(he),we=n(28),Ce=n(101),ye=n(85),Se={description:{getColumnName:function(){return"description"},getColumnType:function(){return{dataType:"string",dataSource:"GitHubGraphQL"}},getColumnFragment:function(){return{name:"description",fragment:"fragment description on Repository { description } "}}},name:{getColumnName:function(){return"name"},getColumnType:function(){return{dataType:"string",dataSource:"GitHubGraphQL"}},getColumnFragment:function(){return{name:"name",fragment:"fragment name on Repository { name } "}}},createdAt:{getColumnName:function(){return"createdAt"},getColumnType:function(){return{dataType:"string",dataSource:"GitHubGraphQL"}},getColumnFragment:function(){return{name:"createdAt",fragment:" fragment createdAt on Repository { createdAt } "}}},repositoryTopics:{getColumnName:function(){return"repositoryTopics"},getColumnType:function(){return{dataType:"string",dataSource:"GitHubGraphQL"}},getColumnFragment:function(){return{name:"repositoryTopics",fragment:"fragment repositoryTopics on Repository { repositoryTopics(first:100) { nodes { topic { id name } } } }"}}}},ke=function(e){return"query {\n    viewer {\n      repositories (first:100".concat(e?', after:"'+e+'"':"",") {\n        pageInfo {\n          endCursor\n        }\n        totalCount\n        nodes {\n          id\n          ").concat(Object.values(Se).map((function(e){return"...".concat(e.getColumnFragment().name,"\n")})),"\n          ...stargazers\n          ...primaryLanguage\n          ...private\n          ...archived\n          ...issues\n          ...pullRequestCount\n          ...owner\n          ...nameWithOwner\n          ...url\n          ...fork\n          ...licenses\n          ...vulnerabilityAlerts\n          ...collaborators\n        }\n      }\n    }\n  }\n\n").concat(Object.values(Se).map((function(e){return e.getColumnFragment().fragment})),"\n\nfragment stargazers on Repository {\n  stargazers {\n    totalCount\n  }\n}\n\nfragment primaryLanguage on Repository {\n  primaryLanguage {\n    name\n  }\n}\n\nfragment private on Repository {\n  isPrivate\n}\n\nfragment archived on Repository {\n  isArchived\n}\n\nfragment issues on Repository {\n  issues (states: OPEN) {\n    totalCount\n  }\n}\n\nfragment pullRequestCount on Repository {\n  pullRequests (states: OPEN) {\n    totalCount\n  }\n}\n\nfragment owner on Repository {\n  owner {\n    login\n  }\n}\n\nfragment nameWithOwner on Repository {\n  nameWithOwner\n}\n\nfragment url on Repository {\n  url\n}\n\nfragment fork on Repository {\n  isFork\n}\n\nfragment licenses on Repository {\n  licenseInfo {\n    name\n    nickname\n  }\n}\n\nfragment vulnerabilityAlerts on Repository {\n  vulnerabilityAlerts (first:50){\n    nodes {\n      securityVulnerability {\n        package {\n          name\n        }\n        advisory {\n          description\n          summary\n        }\n      }\n    }\n  }\n}\n\nfragment collaborators on Repository {\n  collaborators (first: 50){\n    nodes {\n      name\n      login\n    }\n  }\n}\n")},Re=ve.a.mark(De),Le=ve.a.mark(Ve),Ae=ve.a.mark(qe),Te=ve.a.mark(He),Ne=ve.a.mark(We),Fe=ve.a.mark(Be),Ie=ve.a.mark(Ue),ze=ve.a.mark(Qe),Pe=ve.a.mark(Je),Ee=ve.a.mark(Me),Ge=ve.a.mark(Ke),_e=new Ce.a;function De(){var e;return ve.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=new URLSearchParams(window.location.search)).get("access_token")){t.next=6;break}return t.next=4,Object(we.c)(le({access_token:e.get("access_token")}));case 4:return t.next=6,Je();case 6:case"end":return t.stop()}}),Re)}function Ve(){return ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(we.e)("INIT",De);case 2:case"end":return e.stop()}}),Le)}function qe(){var e,t;return ve.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e={redirect_uri:window.location.origin+window.location.pathname,scope:"repo"},t="".concat("https://github-auth-backend-hugh.glitch.me/start_auth","?").concat(new URLSearchParams(e)),n.next=4,window.location.assign(t);case 4:case"end":return n.stop()}}),Ae)}function He(){return ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(we.e)("START_LOG_IN",qe);case 2:case"end":return e.stop()}}),Te)}function We(e){var t,n,r,a;return ve.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(we.d)((function(e){return e.userLoginReducer.accessToken}));case 2:return t=c.sent,c.next=5,Object(we.d)((function(e){var t;return null===(t=e.userLoginReducer.user)||void 0===t?void 0:t.login}));case 5:return n=c.sent,c.prev=6,c.next=9,Object(we.b)((function(){return Object(ye.a)({query:ke(null!==e&&void 0!==e?e:""),headers:{authorization:"token ".concat(t),accept:"application/vnd.github.vixen-preview+json"}})}));case 9:r=c.sent,c.next=16;break;case 12:c.prev=12,c.t0=c.catch(6),console.log(c.t0),r=c.t0.data;case 16:return a=r.viewer.repositories.nodes.map((function(e){return{id:e.id,name:e.name,nameWithOnwer:e.nameWithOwner,description:e.description,createdAt:e.createdAt,topics:e.repositoryTopics.nodes.map((function(e){return e.topic.name})),stars:e.stargazers.totalCount,language:(t=e.primaryLanguage,t&&t.name),isPrivate:e.isPrivate,isArchived:e.isArchived,url:e.url,owner:e.owner.login,isFork:e.isFork,licenseNickname:e.licenseInfo&&(e.licenseInfo.nickname||e.licenseInfo.name),vulnerabilityAlerts:e.vulnerabilityAlerts.nodes,collaborators:e.collaborators&&e.collaborators.nodes.filter((function(e){return e.login!==n})),issueCount:e.issues.totalCount,pullRequestCount:e.pullRequests.totalCount};var t})),c.next=19,Object(we.c)(A({repositories:a}));case 19:return c.next=21,Object(we.d)((function(e){var t;return null===(t=e.reducer.repositories)||void 0===t?void 0:t.length}));case 21:if(!(c.sent<r.viewer.repositories.totalCount)){c.next=25;break}return c.next=25,We(r.viewer.repositories.pageInfo.endCursor);case 25:case"end":return c.stop()}}),Ne,null,[[6,12]])}function Be(){return ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(we.e)("START_LOAD_REPOSITORIES",We);case 2:case"end":return e.stop()}}),Fe)}function Ue(){return ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(we.c)(T());case 2:return e.next=4,We();case 4:case"end":return e.stop()}}),Ie)}function Qe(){return ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(we.e)("REFRESH_REPOSITORIES",Ue);case 2:case"end":return e.stop()}}),ze)}function Je(){var e,t,n;return ve.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(we.d)((function(e){return e.userLoginReducer.accessToken}));case 2:return e=r.sent,_e=new Ce.a({auth:"token ".concat(e)}),r.next=6,Object(we.b)((function(){return _e.users.getAuthenticated()}));case 6:return t=r.sent,n=t.data,r.next=10,Object(we.c)(je({user:n}));case 10:return r.next=12,We();case 12:case"end":return r.stop()}}),Pe)}function Me(){return ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(we.e)("START_LOAD_USER",Je);case 2:case"end":return e.stop()}}),Ee)}function Ke(){return ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(we.a)([Ve(),He(),Be(),Me(),Qe()]);case 2:case"end":return e.stop()}}),Ge)}var Xe=Object(xe.a)(),Ye=Object(S.a)({reducer:{reducer:I,userLoginReducer:pe},middleware:[Xe]}),Ze=function(){return Object(u.b)()};Xe.run(Ke),Ye.dispatch({type:"INIT"}),a.a.render(Object(l.jsx)(u.a,{store:Ye,children:Object(l.jsx)(ge,{})}),document.getElementById("root"))}},[[154,1,2]]]);
//# sourceMappingURL=main.8cd21ab6.chunk.js.map