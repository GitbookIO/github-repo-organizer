(this["webpackJsonpgithub-repo-organizer"]=this["webpackJsonpgithub-repo-organizer"]||[]).push([[0],{157:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(14),i=n.n(a),c=n(16),s=n(33),u=n(60),l=n(28),p=n(34),j=n(35),b=n(10),g=n(207),O=n(205),f=n(89),d=n(204),m=n(201),h=n(118),x=n.n(h),v=n(206),S=n(56),w=n(209),y=n(200),C=n(202),R=n(203),T=n(67),k=n(23),E=n(5),I=function(e){Object(p.a)(n,e);var t=Object(j.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(E.jsxs)(o.a.Fragment,{children:[Object(E.jsx)(f.a,{variant:"h1",children:"Log in!"}),Object(E.jsx)(f.a,{paragraph:!0,children:"Please log in with GitHub to start organizing your repositories."})]})}}]),n}(r.Component),A=n(210),L=n(159),_=n(211),N=n(22),F=n(9),G=Object(A.a)({}),P=function(e){return Object(E.jsx)(F.b,Object(c.a)({formatterComponent:function(e){return e.value.toLocaleDateString()}},e))},D=function(e){return Object(E.jsx)(F.b,Object(c.a)({formatterComponent:function(e){var t=e.value,n=t.href,r=t.title;return Object(E.jsx)("a",{href:n,children:r})}},e))},z=function(e){return Object(E.jsx)(F.b,Object(c.a)({formatterComponent:function(e){var t=e.value;return t?Object(E.jsx)(E.Fragment,{children:t.map((function(e){return Object(E.jsx)(_.a,{style:{margin:"3px"},label:e},e)}))}):null}},e))},V=function(e){return Object(E.jsx)(F.b,Object(c.a)({formatterComponent:function(e){var t=e.value;return Object(E.jsx)(_.a,{label:t?"True":"False"})}},e))},q=function(e){return Object(E.jsx)(F.b,Object(c.a)({formatterComponent:function(e){return e.value.length}},e))},H=function(e){return Object(E.jsx)(F.b,Object(c.a)({formatterComponent:function(e){var t=e.value;return Object(E.jsx)("input",{type:"checkbox",value:t})}},e))},U=[{columnName:"topics",wordWrapEnabled:!0},{columnName:"description",wordWrapEnabled:!0}];var W=function(e){return{gridState:e.gridState}},B=function(e){return{setGridState:function(t){return e({type:"SET_GRID_STATE",gridState:t})}}},Q=Object(b.a)(G)(Object(S.b)(W,B)((function(e){var t=e.repositories,n=e.gridState,r=e.setGridState;return Object(E.jsx)(L.a,{children:Object(E.jsxs)(N.b,{columns:[{name:"selected",title:"Selected",getCellValue:function(e){return!1}},{name:"name",title:"Name",getCellValue:function(e){return{href:e.url,title:e.name}}},{name:"description",title:"Description"},{name:"createdAt",title:"Created At",getCellValue:function(e){return new Date(e.createdAt)}},{name:"topics",title:"Topics"},{name:"stars",title:"Stars"},{name:"language",title:"Language"},{name:"owner",title:"Owner"},{name:"isPrivate",title:"Private"},{name:"isArchived",title:"Archived"},{name:"isFork",title:"Fork"},{name:"licenseNickname",title:"License"},{name:"vulnerabilityAlerts",title:"Vulnerability Alerts"},{name:"collaborators",title:"Collaborators",getCellValue:function(e){return e.collaborators&&e.collaborators.map((function(e){return e.login}))}},{name:"issueCount",title:"Open Issue Count"},{name:"pullRequestCount",title:"Open Pull Request Count"}],rows:t,children:[Object(E.jsx)(P,{for:["createdAt"]}),Object(E.jsx)(D,{for:["name"]}),Object(E.jsx)(z,{for:["topics","collaborators"]}),Object(E.jsx)(V,{for:["isPrivate","isArchived","isFork"]}),Object(E.jsx)(q,{for:["vulnerabilityAlerts"]}),Object(E.jsx)(H,{for:["selected"]}),Object(E.jsx)(F.e,{defaultFilters:[],filters:n.filteringState,onFiltersChange:function(e){r(Object(c.a)(Object(c.a)({},n),{},{filteringState:e}))}}),Object(E.jsx)(F.p,{defaultSorting:[],sorting:n.sortingState,onSortingChange:function(e){r(Object(c.a)(Object(c.a)({},n),{},{sortingState:e}))}}),Object(E.jsx)(F.m,{defaultCurrentPage:0,pageSize:40}),Object(E.jsx)(F.o,{value:n.searchState,onValueChange:function(e){r(Object(c.a)(Object(c.a)({},n),{},{searchState:e}))}}),Object(E.jsx)(F.i,{}),Object(E.jsx)(F.k,{}),Object(E.jsx)(F.j,{}),Object(E.jsx)(N.e,{columnExtensions:U}),Object(E.jsx)(N.h,{showSortingControls:!0}),Object(E.jsx)(N.g,{showFilterSelector:!0}),Object(E.jsx)(N.f,{hiddenColumnNames:n.columnVisibilityState,onHiddenColumnNamesChange:function(e){r(Object(c.a)(Object(c.a)({},n),{},{columnVisibilityState:e}))}}),Object(E.jsx)(N.i,{}),Object(E.jsx)(N.d,{}),Object(E.jsx)(N.a,{}),Object(E.jsx)(N.c,{})]})})}))),J=Object(S.b)(W,B)(Q);function K(e){return Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(J,{repositories:e.repositories})})}var M=n(29),X=function(e){if(!e.repositories)return Object(E.jsx)("p",{children:"Loading"});var t=e.repositories.flatMap((function(e){return e.topics})).reduce((function(e,t){return Object(c.a)(Object(c.a)({},e),{},{[t]:e[t]?e[t]+1:1})}),{}),n=Object.entries(t).map((function(e){var t=Object(M.a)(e,2);return{topicName:t[0],topicCount:t[1]}}));return Object(E.jsx)(L.a,{children:Object(E.jsxs)(N.b,{columns:[{name:"topicName",title:"Topic Name"},{name:"topicCount",title:"Topic Count"}],rows:n,children:[Object(E.jsx)(F.p,{defaultSorting:[{columnName:"topicCount",direction:"desc"}]}),Object(E.jsx)(F.k,{}),Object(E.jsx)(N.e,{}),Object(E.jsx)(N.h,{showSortingControls:!0})]})})},Y=function(e){if(!e.repositories)return Object(E.jsx)("p",{children:"Loading"});var t=e.repositories.map((function(e){return e.licenseNickname})).reduce((function(e,t){return Object(c.a)(Object(c.a)({},e),{},{[t]:e[t]?e[t]+1:1})}),{}),n=Object.entries(t).map((function(e){var t=Object(M.a)(e,2);return{license:t[0],licenseCount:t[1]}}));return Object(E.jsx)(L.a,{children:Object(E.jsxs)(N.b,{columns:[{name:"license",title:"License"},{name:"licenseCount",title:"License Count"}],rows:n,children:[Object(E.jsx)(F.p,{defaultSorting:[{columnName:"licenseCount",direction:"desc"}]}),Object(E.jsx)(F.k,{}),Object(E.jsx)(N.e,{}),Object(E.jsx)(N.h,{showSortingControls:!0})]})})},Z=function(e){if(!e.repositories)return Object(E.jsx)("p",{children:"Loading"});var t=e.repositories.map((function(e){return e.language})).reduce((function(e,t){return Object(c.a)(Object(c.a)({},e),{},{[t]:e[t]?e[t]+1:1})}),{}),n=Object.entries(t).map((function(e){var t=Object(M.a)(e,2);return{language:t[0],languageCount:t[1]}}));return Object(E.jsx)(L.a,{children:Object(E.jsxs)(N.b,{columns:[{name:"language",title:"Language"},{name:"languageCount",title:"Count"}],rows:n,children:[Object(E.jsx)(F.p,{defaultSorting:[{columnName:"languageCount",direction:"desc"}]}),Object(E.jsx)(F.k,{}),Object(E.jsx)(N.e,{}),Object(E.jsx)(N.h,{showSortingControls:!0})]})})},$=n(142),ee=function(e){Object(p.a)(n,e);var t=Object(j.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).state={drawerOpen:!1},r.ifLoggedOut=r.ifLoggedOut.bind(Object(l.a)(r)),r.ifLoggedIn=r.ifLoggedIn.bind(Object(l.a)(r)),r.ifRepositories=r.ifRepositories.bind(Object(l.a)(r)),r}return Object(u.a)(n,[{key:"toggleDrawer",value:function(e){this.setState((function(t){return Object(c.a)(Object(c.a)({},t),{},{drawerOpen:e||!t.drawerOpen})}))}},{key:"ifRepositories",value:function(e){return this.props.repositories?e:null}},{key:"ifLoggedOut",value:function(e){return this.props.loggedIn?null:e}},{key:"ifLoggedIn",value:function(e){return this.props.loggedIn?e:null}},{key:"render",value:function(){var e=this,t=this.props.classes;return Object(E.jsxs)(o.a.Fragment,{children:[Object(E.jsx)(v.a,{}),Object(E.jsx)(T.a,{children:Object(E.jsxs)("div",{className:"App",children:[Object(E.jsx)(g.a,{children:Object(E.jsxs)(O.a,{children:[this.ifLoggedIn(Object(E.jsx)(m.a,{className:t.menuButton,color:"inherit","aria-label":"Menu",onClick:function(){return e.toggleDrawer()},children:Object(E.jsx)(x.a,{})})),Object(E.jsx)(f.a,{variant:"h6",color:"inherit",className:t.grow,children:"GitHub Repo Organizer"}),this.ifLoggedOut(Object(E.jsx)(d.a,{onClick:this.props.startLogIn,color:"inherit",children:"Login"})),this.ifLoggedIn(Object(E.jsx)(d.a,{onClick:this.props.refresh,color:"inherit",children:"Refresh"}))]})}),Object(E.jsx)(w.a,{open:this.state.drawerOpen,onClose:function(){return e.toggleDrawer(!1)},children:Object(E.jsx)("div",{onClick:function(){return e.toggleDrawer(!1)},onKeyDown:function(){return e.toggleDrawer(!1)},children:Object(E.jsxs)(y.a,{children:[Object(E.jsx)(C.a,{button:!0,children:Object(E.jsx)(T.b,{to:"/github-repo-organizer/",children:Object(E.jsx)(R.a,{primary:"Repositories"})})}),Object(E.jsx)(C.a,{button:!0,children:Object(E.jsx)(T.b,{to:"/github-repo-organizer/topics",children:Object(E.jsx)(R.a,{primary:"Topics"})})}),Object(E.jsx)(C.a,{button:!0,children:Object(E.jsx)(T.b,{to:"/github-repo-organizer/licenses",children:Object(E.jsx)(R.a,{primary:"Licenses"})})}),Object(E.jsx)(C.a,{button:!0,children:Object(E.jsx)(T.b,{to:"/github-repo-organizer/languages",children:Object(E.jsx)(R.a,{primary:"Languages"})})})]})})}),Object(E.jsxs)("main",{className:t.content,children:[Object(E.jsx)("div",{className:t.appBarSpacer}),this.ifLoggedOut(Object(E.jsx)(I,{})),this.ifLoggedIn(Object(E.jsxs)(k.c,{children:[Object(E.jsx)(k.a,{exact:!0,path:"/github-repo-organizer/",component:function(t){var n=$.parse(t.location.search);return n.gridState&&e.props.setGridState(JSON.parse(n.gridState)),Object(E.jsx)(K,{queryParams:n,repositories:e.props.repositories||[]})}}),Object(E.jsx)(k.a,{exact:!0,path:"/github-repo-organizer/topics",component:function(){return Object(E.jsx)(X,{repositories:e.props.repositories})}}),Object(E.jsx)(k.a,{exact:!0,path:"/github-repo-organizer/licenses",component:function(){return Object(E.jsx)(Y,{repositories:e.props.repositories})}}),Object(E.jsx)(k.a,{exact:!0,path:"/github-repo-organizer/languages",component:function(){return Object(E.jsx)(Z,{repositories:e.props.repositories})}})]}))]})]})})]})}}]),n}(r.Component),te=Object(S.b)((function(e){return{loggedIn:e.loggedIn,repositories:e.repositories}}),(function(e){return{startLogIn:function(){return e({type:"START_LOG_IN"})},refresh:function(){return e({type:"REFRESH_REPOSITORIES"})},loadRepositories:function(){return e({type:"START_LOAD_REPOSITORIES"})},loadUser:function(){return e({type:"START_LOAD_USER"})},setGridState:function(t){return e({type:"SET_GRID_STATE",gridState:t})}}})),ne=Object(b.a)((function(e){return{root:{flexGrow:1},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20},appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,padding:e.spacing(3),height:"100vh",overflow:"auto"}}}))(te(ee)),re=n(54),oe=n(122),ae=n(20),ie=n.n(ae),ce=n(25),se=n(100),ue=n.n(se),le=n(101),pe=n(84),je={description:{getColumnName:function(){return"description"},getColumnType:function(){return{dataType:"string",dataSource:"GitHubGraphQL"}},getColumnFragment:function(){return{name:"description",fragment:"fragment description on Repository { description } "}}},name:{getColumnName:function(){return"name"},getColumnType:function(){return{dataType:"string",dataSource:"GitHubGraphQL"}},getColumnFragment:function(){return{name:"name",fragment:"fragment name on Repository { name } "}}},createdAt:{getColumnName:function(){return"createdAt"},getColumnType:function(){return{dataType:"string",dataSource:"GitHubGraphQL"}},getColumnFragment:function(){return{name:"createdAt",fragment:" fragment createdAt on Repository { createdAt } "}}},repositoryTopics:{getColumnName:function(){return"repositoryTopics"},getColumnType:function(){return{dataType:"string",dataSource:"GitHubGraphQL"}},getColumnFragment:function(){return{name:"repositoryTopics",fragment:"fragment repositoryTopics on Repository { repositoryTopics(first:100) { nodes { topic { id name } } } }"}}}},be=function(e){return"query {\n    viewer {\n      repositories (first:100".concat(e?', after:"'+e+'"':"",") {\n        pageInfo {\n          endCursor\n        }\n        totalCount\n        nodes {\n          id\n          ").concat(Object.values(je).map((function(e){return"...".concat(e.getColumnFragment().name,"\n")})),"\n          ...stargazers\n          ...primaryLanguage\n          ...private\n          ...archived\n          ...issues\n          ...pullRequestCount\n          ...owner\n          ...nameWithOwner\n          ...url\n          ...fork\n          ...licenses\n          ...vulnerabilityAlerts\n          ...collaborators\n        }\n      }\n    }\n  }\n\n").concat(Object.values(je).map((function(e){return e.getColumnFragment().fragment})),"\n\nfragment stargazers on Repository {\n  stargazers {\n    totalCount\n  }\n}\n\nfragment primaryLanguage on Repository {\n  primaryLanguage {\n    name\n  }\n}\n\nfragment private on Repository {\n  isPrivate\n}\n\nfragment archived on Repository {\n  isArchived\n}\n\nfragment issues on Repository {\n  issues (states: OPEN) {\n    totalCount\n  }\n}\n\nfragment pullRequestCount on Repository {\n  pullRequests (states: OPEN) {\n    totalCount\n  }\n}\n\nfragment owner on Repository {\n  owner {\n    login\n  }\n}\n\nfragment nameWithOwner on Repository {\n  nameWithOwner\n}\n\nfragment url on Repository {\n  url\n}\n\nfragment fork on Repository {\n  isFork\n}\n\nfragment licenses on Repository {\n  licenseInfo {\n    name\n    nickname\n  }\n}\n\nfragment vulnerabilityAlerts on Repository {\n  vulnerabilityAlerts (first:50){\n    nodes {\n      securityVulnerability {\n        package {\n          name\n        }\n        advisory {\n          description\n          summary\n        }\n      }\n    }\n  }\n}\n\nfragment collaborators on Repository {\n  collaborators (first: 50){\n    nodes {\n      name\n      login\n    }\n  }\n}\n")},ge=ie.a.mark(Re),Oe=ie.a.mark(Te),fe=ie.a.mark(ke),de=ie.a.mark(Ee),me=ie.a.mark(Ie),he=ie.a.mark(Ae),xe=ie.a.mark(Le),ve=ie.a.mark(_e),Se=ie.a.mark(Ne),we=ie.a.mark(Fe),ye=ie.a.mark(Ge),Ce=new le.a;function Re(){var e;return ie.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=ue.a.parse(window.location.search.substring(1))).access_token){t.next=6;break}return t.next=4,Object(ce.c)({type:"SET_ACCESS_TOKEN",access_token:e.access_token});case 4:return t.next=6,Ne();case 6:case"end":return t.stop()}}),ge)}function Te(){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ce.e)("INIT",Re);case 2:case"end":return e.stop()}}),Oe)}function ke(){var e,t;return ie.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e={redirect_uri:window.location.origin+window.location.pathname,scope:["repo"]},t="".concat("https://github-auth-backend-hugh.glitch.me/start_auth","?").concat(ue.a.stringify(e)),n.next=4,window.location.assign(t);case 4:case"end":return n.stop()}}),fe)}function Ee(){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ce.e)("START_LOG_IN",ke);case 2:case"end":return e.stop()}}),de)}function Ie(e){var t,n,r,o;return ie.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(ce.d)((function(e){return e.accessToken}));case 2:return t=a.sent,a.next=5,Object(ce.d)((function(e){return e.user.login}));case 5:return n=a.sent,a.prev=6,a.next=9,Object(ce.b)((function(){return Object(pe.a)({query:be(null!==e&&void 0!==e?e:""),headers:{authorization:"token ".concat(t),accept:"application/vnd.github.vixen-preview+json"}})}));case 9:r=a.sent,a.next=16;break;case 12:a.prev=12,a.t0=a.catch(6),console.log(a.t0),r=a.t0.data;case 16:return o=r.viewer.repositories.nodes.map((function(e){return{id:e.id,name:e.name,nameWithOnwer:e.nameWithOwner,description:e.description,createdAt:e.createdAt,topics:e.repositoryTopics.nodes.map((function(e){return e.topic.name})),stars:e.stargazers.totalCount,language:(t=e.primaryLanguage,t&&t.name),isPrivate:e.isPrivate,isArchived:e.isArchived,url:e.url,owner:e.owner.login,isFork:e.isFork,licenseNickname:e.licenseInfo&&(e.licenseInfo.nickname||e.licenseInfo.name),vulnerabilityAlerts:e.vulnerabilityAlerts.nodes,collaborators:e.collaborators&&e.collaborators.nodes.filter((function(e){return e.login!==n})),issueCount:e.issues.totalCount,pullRequestCount:e.pullRequests.totalCount};var t})),a.next=19,Object(ce.c)({type:"SET_REPOSITORIES",repositories:o});case 19:return a.next=21,Object(ce.d)((function(e){return e.repositories.length}));case 21:if(!(a.sent<r.viewer.repositories.totalCount)){a.next=25;break}return a.next=25,Ie(r.viewer.repositories.pageInfo.endCursor);case 25:case"end":return a.stop()}}),me,null,[[6,12]])}function Ae(){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ce.e)("START_LOAD_REPOSITORIES",Ie);case 2:case"end":return e.stop()}}),he)}function Le(){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ce.c)({type:"DELETE_REPOSITORIES"});case 2:return e.next=4,Ie();case 4:case"end":return e.stop()}}),xe)}function _e(){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ce.e)("REFRESH_REPOSITORIES",Le);case 2:case"end":return e.stop()}}),ve)}function Ne(){var e,t,n,r;return ie.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(ce.d)((function(e){return e.accessToken}));case 2:return e=o.sent,Ce=new le.a({auth:"token ".concat(e)}),t={owner:"hughrawlinson",repo:"github-repo-organizer"},o.next=7,Object(ce.b)((function(){return Ce.users.getAuthenticated()}));case 7:if(n=o.sent,"hughrawlinson"===(r=n.data).login){o.next=19;break}return o.prev=10,o.next=13,Object(ce.b)((function(){return Ce.activity.checkRepoIsStarredByAuthenticatedUser(t)}));case 13:o.next=19;break;case 15:return o.prev=15,o.t0=o.catch(10),o.next=19,Object(ce.b)((function(){return Ce.activity.starRepoForAuthenticatedUser(t)}));case 19:return o.next=21,Object(ce.c)({type:"SET_USER",user:r});case 21:return o.next=23,Ie();case 23:case"end":return o.stop()}}),Se,null,[[10,15]])}function Fe(){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ce.e)("START_LOAD_USER",Ne);case 2:case"end":return e.stop()}}),we)}function Ge(){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ce.a)([Te(),Ee(),Ae(),Fe(),_e()]);case 2:case"end":return e.stop()}}),ye)}var Pe=n(102),De={loggedIn:!1,gridState:{filteringState:[],sortingState:[],searchState:"",columnVisibilityState:["isPrivate","isArchived","isFork","owner","licenseNickname","vulnerabilityAlerts","collaborators","issueCount"]},repositories:void 0},ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ACCESS_TOKEN":return Object(c.a)(Object(c.a)({},e),{},{accessToken:t.access_token,loggedIn:!0});case"SET_REPOSITORIES":return t.repositories?Object(c.a)(Object(c.a)({},e),{},{repositories:[].concat(Object(Pe.a)(e.repositories||[]),Object(Pe.a)(t.repositories))}):e;case"DELETE_REPOSITORIES":return Object(c.a)(Object(c.a)({},e),{},{repositories:[]});case"SET_USER":return Object(c.a)(Object(c.a)({},e),{},{user:t.user});case"SET_GRID_STATE":return Object(c.a)(Object(c.a)({},e),{},{gridState:t.gridState});default:return e}},Ve=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||re.c,qe=Object(oe.a)(),He=Object(re.d)(ze,Ve(Object(re.a)(qe)));qe.run(Ge),He.dispatch({type:"INIT"}),i.a.render(Object(E.jsx)(S.a,{store:He,children:Object(E.jsx)(ne,{})}),document.getElementById("root"))}},[[157,1,2]]]);
//# sourceMappingURL=main.6bec8755.chunk.js.map